---
title: 'Deploying migrations from a local environment'
metaTitle: 'Deploying migrations from a local environment'
metaDescription: 'Learn how to deploy Node.js and TypeScript applications that are using Prisma Client locally.'
tocDepth: 3
---

<TopBlock>

There are instances whereby you might want to run a deployment migration locally. This page outlines some examples of how you can do that and **why its generally a bad practice**.

</TopBlock>

## Local CI/CD pipeline

You want to control the CI/CD process locally. You have a database with 3 environments, development, staging and production. You keep 3 different connection strings which each relate to a different environment as `.env` variables.

Having made some changes to your schema you want to run a migration against your development environment so that those changes are reflected in your database. You run `prisma migrate dev` and the migration is applied.

Next you want to manually sync your staging and production environments too.

### A potential solution

> **_We stongly discourage this solution due to the following reasons, use it at your own discretion!_ **
>
> - You risk exposing your production database connection string to version control.
> - You may accidentally use your production connection string instead and in turn **override or delete your production database**.

You can comment out your development and staging connection strings and run `prisma migrate deploy`, this will update your production database with your new schema changes.

### An alternative approach

An alternative approach would be to let a CI/CD service handle your staging and production environments.

If your goal is to prototype your schema and still have 3 environments that mock a real world use case then you might consider using the [`db push`](../../../../concepts/components/prisma-migrate/db-push) command.

## Add migrations to a pre-existing database locally.

You have a database that has not had any migrations run on it. Its either a brownfield project or a project you have yet to introduce Prisma to. You have now decided that you would like to harness the power of Prisma Migrations. 

You begin by running `prisma migrate dev` on your development environment database. This will create a new migration history, if you were to run `prisma migrate deploy` on your production environment, it would fail however. This is because `prisma migrate deploy` will try to re-create an existing state. 

To achieve this, you can baseline your production database locally. 

This will, in affect:

- Create a new migration based off of your 